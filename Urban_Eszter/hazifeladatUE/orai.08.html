<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        let myPhoneNumbers = [3630792765, 3630369549, 3620797249, 3670129465, 3630735165, 3630799685, 3630294765, 3630739572, 3630792388, 3630792947, 3630798965, 3630799284, 3630793325, 3630799685, 3630194265,];
        let myNames = ['Bandobras Underhill', 'Robin Gardner', 'Isembold Whitfoot', 'Donnamira Galbassi', 'Bungo Baggins', 'Will Sandyman', 'Isengrim Proudfoot', 'Frodo Baggins', 'Amaranth Gaukrogers', 'Trahand Bunce', 'Will Sandyman', 'Halfred Goodchild', 'Bilbo Baggins', 'Will Sandyman', 'Belba Sandheaver'];
        let emails = ['paulnoel21@agung002.com', 'weegrah1@eeothno.com', 'johnjohn69@hungta2.com', 'johnjohn69@hungta2.com', 'yuzhakova1960@hungta2.com', 'yuzhakova1960@hungta2.com', 'lemonkakiska@cggup.com', 'lemonkakiska@cggup.com', 'bd8axwy@cuendita.com', 'bd8axwy@cuendita.com', 'gasg@supok.site', 'gasg@supok.site', 'zaqman@pianoxltd.com', 'zaqman@pianoxltd.com'];
        
        function telephoneBookAdder(names, phoneNumbers){
            let telephoneBook = [];
            for(let i = 0; i < names.length; i++){
                telephoneBook.push({name: names[i], phonenumber: phoneNumbers[i]})
            
            }
            return telephoneBook;
        }
        let phoneBook = telephoneBookAdder(myNames, myPhoneNumbers);
        console.log(phoneBook);

/**
 * Irj fuggvenyt ami kap egy nevet es egy telefonszamot parameterkent
 * es hozzadja a telefonkonyvhoz az uj bejegyzest { name: string, mobile: number }
 * A telefonkonyv amibe kell rakni a bejegyzest legyen a fuggveny elso parametere, aztan a nev, aztan a telefonszam
 *
 * Visszateresti ertek legyen az ujonnan letrehozott bejegyzes
 */
        function add(telePhoneBook, name, mobile) {
            let person = {name: name, phonenumber: mobile}
            if (mobile === undefined){
                return null
            }else{
            telePhoneBook.push(person);
            return person; 
            }
        }
        console.log(add(phoneBook, 'Eszter', 36305856214))

         /**
 * Irj fuggvenyt ami megkeresi a telefonszamhoz tartozo bejegyzest a telefonkonyben.
 * A fuggveny elso parametere a telefonkonyv amiben keresni kell a masodik a telefonszam amit keresni kell.
 *
 * Ha van talalat a visszateresi ertek legyen a bejegyzes
 * Ha nincs talalat a visszateres legyen null
 */

        function findByMobile(telePhoneBook, mobile) {
            for(let i = 0; i < telePhoneBook.length; i++){
                if(mobile === telePhoneBook[i].phonenumber){
                    return telePhoneBook[i];
                }  
            }
            return null;
        }
        console.log(findByMobile(phoneBook, 36305856214));

       /* function findByName(telePhoneBook, name) {
            for(let i = 0; i < telePhoneBook.length; i++){
                if(name === telePhoneBook[i].name){
                    return telePhoneBook[i];
                }  
            }
            return null;
        }
        console.log(findByMobile(phoneBook, 'Eszter'));*/
/**
 * Irj fuggvenyt ami megkeresi a telefonszamhoz tartozo bejegyzest a telefonkonyben.
 * A fuggveny elso parametere a telefonkonyv amiben keresni kell a masodik a telefonszam amit keresni kell.
 *
 * Ha van talalat a visszateresi ertek legyen a bejegyzes indexxe
 * Ha nincs talalat a visszateres legyen null
 */
        function indexByMobile(telePhoneBook, mobile) {
            for(let i = 0; i < telePhoneBook.length; i++){
                    if(mobile === telePhoneBook[i].phonenumber){
                        return i;
                    }  
                }
                    return -1;
        }
        console.log(indexByMobile(phoneBook, 36305856214))

        function indexByName(telePhoneBook, name) {
            for(let i = 0; i < telePhoneBook.length; i++){
                    if(name === telePhoneBook[i].name){
                        return i;
                    }  
                }
                    return -1;
        }
        console.log(indexByName(phoneBook, 'Eszter'))
       
        //generic find
      /* function find(telePhoneBook, value){
            
                if(typeof value === 'string'){
                    return indexByMobile(telePhoneBook, value);
                } else if(typeof value === 'number'){
                    return indexByName(telePhoneBook, value);
                }
            
            
        }
        console.log(find(phoneBook, 'Eszter'));
        console.log(find(phoneBook, 36305856214));*/

/**
 * Irj fuggvenyt ami kap egy telefonszamot es kitorli a hozza tartozo bejegyzest
 * A fuggveny elso parametere a telefonkonyv amibol torolni kell a masodik a telefonszam amit keresni kell.
 *
 * Segitseg: indexByMobile, splice
 *
 * A visszateresi ertek legyen a kitorolt bejegyzes,
 * ha a bejegyzes nem letezett, a visszateresi ertek legyen null
 */
    /*    function remove(telePhoneBook, mobile) {
            for(let i = 0; i < telePhoneBook.length; i++){
                if(mobile === telePhoneBook[i].phonenumber){
                    return telePhoneBook.splice(i);
                }
            }
            return null;
        }
        console.log(remove(phoneBook, 36305856214))
*/
        function remove(phoneBook, mobile){
            let index = indexByMobile(phoneBook, mobile); //mivel van már ilyen keresésünk
            if (index > -1){
                //let removedEntry = phoneBook[index]; return ezzel
                return phoneBook.splice(index, 1);
                
            } 
                return null
                
        }
        /**
 * Irj fuggvenyt ami megkeresi az osszes bejegyzest a telefonkonyvben az atadott nevhez.
 * A fuggveny elso parametere a telefonkonyv amiben keresni kell a masodik a nev amit keresni kell.
 *
 * Ha van talalat a visszateresi ertek legyen a bejegyzesek tombje
 * Ha nincs talalat a visszateres legyen ures tomb
 */
        add(phoneBook, 'Eszter', 36301234567);
        add(phoneBook, 'Eszter', 36304567891);

        function filterByName(telePhoneBook, name) {
            let person = [];
            for(let i = 0; i < telePhoneBook.length; i++){
                if(name === telePhoneBook[i].name){
                    person.push(telePhoneBook[i]);
                }
            }
            return person;
        }
        console.log(filterByName(phoneBook, 'Olivér'));
        console.log(filterByName(phoneBook, 'Eszter'));
/**
 * Irj fuggvenyt ami hozzaad egy uj mezot egy letezo bejegyzeshez
 * Bemeneti erteknek kapjon egy telefonkonyvet, egy telefonszamot, az uj mezo nevet, es az uj mezo erteket
 * Ne csinaljon semmt, ha a bejegyzes nem letezik, vagy ha mar van ilyen mezo a bejegyzesen
 *
 * Pl: egy email cimet szeretnenk hozzaadni egy bejegyzeshez
 * addField(phoneBook, 3630123456, 'email', 'email@example.com')
 *
 * Ha sikerult hozzaadni terjen vissza a bejegyzessel
 * Ha nem sikerult terjen vissza null-lal.
 */
        function addField(telePhoneBook, mobile, field, value) {
            for(let i = 0; i < telePhoneBook.length; i++){
                if(mobile === telePhoneBook[i].phonenumber){
                    if(telePhoneBook[i][field] === value){ 
                        return null;
                    } else {
                        telePhoneBook[i][field] = value; 
                        return telePhoneBook[i];
                    }
                } 
            }
            return null;
        }
        console.log(addField(phoneBook, 36305856214, 'email', 'email@example.com'));
        console.log(addField(phoneBook, 36305856214, 'email', 'email@example.com'));

/**
 * Irj fuggvenyt ami modosit egy letezo mezot egy letezo bejegyzesen
 * Bemeneti erteknek kapjon egy telefonkonyvet, egy telefonszamot, a mezo nevet, es a mezo erteket
 * Ne csinaljon semmt,
 *  - ha a bejegyzes nem letezik,
 *  - ha telefonszamot szeretnenk modositani,
 *  - ha nincs ilyen mezo a bejegyzesen
 *
 * Pl: egy email cimet szeretnenk modositeni egy bejegyzeshez
 * modify(3630123456, 'name', 'Mekk Elek')
 *
 * Ha sikerult hozzaadni terjen vissza a bejegyzessel
 * Ha nem sikerult terjen vissza null-lal.
 */
        function modify(telePhoneBook, mobile, field, value) {
            for(let i = 0; i < telePhoneBook.length; i++){
                if(mobile === telePhoneBook[i].phonenumber){
                    if (telePhoneBook[i][field] === undefined || field === 'phonenumber' || telePhoneBook[i] === undefined){
                        return null
                    } else {
                        telePhoneBook[i][field] = value;
                        return telePhoneBook[i]
                    }
                }
            }
        }
        console.log(modify(phoneBook, 36305856214, 'email', 'myemail@example.com'));

// Irj fuggvenyt ami megformaz egy telefonszamot
// "+36 30 1234 567" formatumban es a formazott telefonszammal ter vissza
// Segitseg:
//  - a string indexelheto, mint egy tomb
//  - a slice(start, end) metodus segithet
        function formatPhoneNumber(mobile) {
            let phonenumber = mobile.toString();
            let firstPart = phonenumber.slice(0, 2);
            let secondPart = phonenumber.slice(2, 4);
            let thirdPart = phonenumber.slice(4, 8);
            let fourthPart = phonenumber.slice(8, 11);
            let space = ' ';
            let number = ''
            return mobile = number.concat('+' + firstPart + space + secondPart + space + thirdPart + space + fourthPart);
            
        }
        console.log(formatPhoneNumber(36305856214));

/**
 * FELADAT:
 * Irj programot ami kiirja az ossze Baggins csaladnevu hobbitot es telefonszamanak formazott alakjat a konzolra.
 */
        function filter(telePhoneBook, name) {
            let person = [];
            for(let i = 0; i < telePhoneBook.length; i++){
                if(telePhoneBook[i].name.includes(name)){
                    person.push(telePhoneBook[i]);
                }
            }
            return person;
        }  
        function formatNumber(array){
            for(let i = 0; i < array.length; i++){
                let phonenumber = array[i].phonenumber.toString();
                let firstPart = phonenumber.slice(0, 2);
                let secondPart = phonenumber.slice(2, 4);
                let thirdPart = phonenumber.slice(4, 8);
                let fourthPart = phonenumber.slice(8, 11);
                let space = ' ';
                let mobile = ''
                array[i].phonenumber = mobile.concat('+' + firstPart + space + secondPart + space + thirdPart + space + fourthPart)
                
            }
            return array;
        }
        console.log(formatNumber(filter(phoneBook, 'Baggins')));
      

/**
 * FELADAT:
 * Irj programot ami az ugyan olyan telefonszammal rendelkezok kozul csak egyet hagy meg
 * Nehez!
 */
let duplicates_test = [
  { name: 'Mr. 1', mobile: 36301234567 },
  { name: 'Mr. 2', mobile: 36301234567 },
  { name: 'Mr. 3', mobile: 36301234567 },
  { name: 'Ms. 1', mobile: 36301234568 },
  { name: 'Ms. 2', mobile: 36301234568 },
  { name: 'Ms. 3', mobile: 36301234568 },
  { name: 'Mrs. 1', mobile: 36301234569 }
];
/*function reduce(array){
    for(let i = 0; i < array.length; i++){
        let reducedNumber  = [];
        for(let m = 0; m < reducedNumber.length; m++){
            if(reducedNumber[m].mobile !== array[i].mobile){
                reducedNumber.push(array[i])
            }
        }
        return reducedNumber;
    }
}
console.log(reduce(duplicates_test))*/ //ez még nem jó



/*Callbackes hazi: Irjatok at a findByName es filterByName fuggvenyeket, hogy masodik parameternek name helyett egy callback fuggvenyt fogadjanak.
A callback kapja meg parameternek az aktulis elemet a ciklusbol es terjen vissza true-val ha teljesul benne a feltetel false-val egyebkent.
(Ez a callback fogja lecserelni az if-ben levo feltetelt)

masik hazi a sima filterByName*/
        
        function findBy(telePhoneBook, callback){
            for(let i = 0; i < telePhoneBook.length; i++){
                if(callback(telePhoneBook[i])){
                    return true;
                }
            }
            return false;
        }
        console.log(findBy(phoneBook, function (note){return note.name === 'Eszter'}));




        function filterByNameCallback(telePhoneBook, predicate) {
            let person = [];
            for(let i = 0; i < telePhoneBook.length; i++){
                //if(name === telePhoneBook[i].name)
                if(predicate(telePhoneBook[i].name)){
                    person.push(telePhoneBook[i]);
                }
            }
            return person;
        }
        filterByNameCallback(phoneBook, function(name){return name === 'Eszter'});

        function filterBy(telePhoneBook, predicate) {
            let person = [];
            for(let i = 0; i < telePhoneBook.length; i++){
                if(predicate(telePhoneBook[i])){
                    person.push(telePhoneBook[i]);
                }
            }
            return person;
        }
        console.log(filterBy(phoneBook, function (note){return note.name === 'Eszter'}));
        filterBy(phoneBook, function (note){return note.phonenumber === 36305856214});
    </script>
</body>
</html>